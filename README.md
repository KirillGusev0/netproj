# netproj

Часть 1

Разработать клиент-серверное приложение TCP/IPv4 (в виде одного исполняемого файла, работающего в одном 
из режимов: клиент или сервер).

1. Использовать epoll и неблокирующие сокеты (при этом приложение может быть однопоточным).

2. Сервер должен ожидать подключения, читать данные, дожидаться закрытия соединения и продолжать свою 
работу.

3. Клиент должен поддерживать заданное пользователем количество параллельных соединений к серверу без 
ограничения времени. Каждое соединение должно выполнить подключение к серверу, передачу случайного 
количества произвольных данных и закрытие. После закрытия должно создаваться новое соединение, и весь 
алгоритм выполняться для него заново – чтобы общее число параллельных соединений было постоянным.

4. Штатным средством завершения работы приложения должен быть Ctrl-C.

5. Пример запуска клиента для генерации 512 параллельных соединений с зерном 1337 для инициализации 
генератора случайных чисел:

./gen-app --addr localhost:8000 --mode client --connections 512 --seed 1337

6. Пример запуска сервера:

./gen-app --addr localhost:8000 --mode server


Часть 2

Разработать приложение, которое на основе библиотеки libpcap будет выполнять прослушивание указанного 
пользователем интерфейса (например, lo) и собирать в реальном времени статистику по TCP/IPv4-соединениям.

1. Из каждого прочитанного с помощью libpcap пакета выделить 4-tuple: IP-адреса источника и назначения, 
TCP-порты источника и назначения. 4-tuple – уникальный идентификатор потока данных. Будем считать, что 
потоки (IP1, IP2, Port1, Port2) и (IP2, IP1, Port2, Port1) разные (т.е. одно соединение – это два разных потока).

2. На основе 4-tuple отнести пакет к потоку.

3. Для каждого потока рассчитать: средний размер пакета на уровне Ethernet (включая заголовок Ethernet), 
количество переданных байтов в полезной нагрузке TCP, среднюю скорость передачи данных.

4. В режиме реального времени раз в одну секунду выводить на экран ТОП-10 потоков по скорости передачи 
данных.

5. Штатным средством завершения работы приложения должен быть Ctrl-C.

6. Протестировать работу приложения как минимум на основе приложения из Части 1.
